<section id="listing-section" ng-controller="ShowController as showCtrl">

    <div class="parallax-container" data-happyhour-id="{{_id}}">
      <div id="listing-image" class="parallax"><img ng-src="{{showCtrl.happyHour.showImage}}" alt="{{showCtrl.happyHour.name}}"></div>  
      <h1 id="name-heading">{{showCtrl.happyHour.name}}</h1>

    </div>
    <div class="section white">
      <div class="row">
        <div class="col m6 offset-m3">
          <h2 class="header">Happy Hour Specials</h2>
          <ul class="col m6 offset-m3" id="happy-hour-info">
            <li>{{showCtrl.happyHour.daysOfWeek}}</li>
            <li>{{showCtrl.happyHour.hours}}</li>
            <br>
            <li>
              <ul ng-repeat="happyHour in happyHour">Drink Specials:
                <li>{{showCtrl.happyHour.alcoholType}}</li>
              </ul>
            </li>
          <br>
        </div>
        <div class="col m2 offset-m3 general-info" id="listing-location">
            <p><i class="small material-icons">location_on</i>{{showCtrl.happyHour.address}}</p>
        </div>
        <div class="col m2 general-info" id="listing-price">
            <p id="pricing">{{showCtrl.happyHour.price}}</p>
        </div>
        <div class="col m2 general-info" id="listing-website">
            <a ng-href="{{showCtrl.happyHour.website}}"><p><i class="small material-icons">info_outline</i>{{showCtrl.happyHour.name}} Website</p></a>
        </div>
      </div>
    </div>

  </section>

  <section id="reviews-section" class="container">
    <div class="parallax-container">
      <div class="parallax"></div>
      <div class="row">
        <h2 id="reviews-heading">Reviews</h2>
      </div>
      <div class="row" id="review-list">

        <div ng-controller="IndexReviewsController as indexReviewsCtrl">
          <div ng-repeat="review in indexReviewsCtrl.reviews">
            <div class="card col m4" id="one-review" data-id="{{_id}}">
              <div class="card-content">
                <p class="chip" id="username-chip">{{review.username}}</p>
                <blockquote id="review-blockquote"><span></span>{{review.userReview}}</blockquote>
                <div class="update-delete-btn">
                  <button class="update-button btn waves-effect waves-light review-button" data-target="#update-{{_id}}" id="update-btn"><span class="activator">Update</span></button>
                  <button class="delete-button btn waves-effect waves-light review-button" id="delete-btn" data-id="{{review.review._id}}" ng-click="indexReviewsCtrl.deleteReview(review._id);">Delete</button>
              </div>
              </div>

              <div class="card-reveal collapse" id="update-{{ShowReviewController.review._id}}">
                <span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i></span>
                <div class="save-cancel-btn hidden">
                  <input id="updateInput" value="{{ShowReviewController.review.userReview}}" ng-model="ShowReviewController.review.userReview">
                  <button class="save-button btn waves-effect waves-light review-button" id="save-btn" data-id="{{review.reviewId}}" ng-click="ShowReviewController.updateReview();">Save</button>
                </div>

              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
 
  <section id="modal-section">
    <div class="section white">
      <div class="row">
      
      <!-- Modal Trigger -->
      <div ng-controller="MaterializeController">
        <button class="waves-effect waves-light btn modal-trigger col m2 offset-m5 review-button" data-target="modal1" id="add-review-btn">Add Review</button>
      </div>
        <!-- Modal Structure -->
        <div id="modal1" class="modal">
          <div class="modal-content">
            <h4>Add a Review</h4>

            <div class="row">
              <form class="col s12" method="POST" action="/api/reviews" id="form-modal">
                <div class="row modal-form-row">
                  <div class="input-field col s12">
                    <input id="username" type="text" class="validate" required>
                    <label for="username">Your Name</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="user-review" type="text" class="materialize-textarea validate" required></textarea>
                    <label for="user-review">Your Review</label>
                  </div>
                  <div class="modal-footer">
                    <input type="submit" class="modal-action waves-effect waves-green btn-flat" id="submit-btn">
                  </div>
                </div>  
              </form>
            </div>
          </div>
        </div>



        <!-- Modal Trigger -->
        <div ng-controller="MaterializeController">
        <div class="col">
            <a class='btn' href='#demoModal' modal>Show Modal</a>
        </div>
        <!-- Modal Structure -->
        <div id="demoModal" class="modal">
            <div class="modal-content">
                <h4>Modal header</h4>
                <p>A bunch of text</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
            </div>
        </div>
        </div>

    </div>
  </div>
</section>